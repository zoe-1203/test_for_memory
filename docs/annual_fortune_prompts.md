# 年运功能 Prompt 文档

## 流程总览

年运功能共 **6 个步骤**，其中步骤 1、3、4 内部存在并发调用。

---

## 步骤 1：12 个月运势（12个月并发）

### Prompt 函数

`getAnnualFortunePrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `overviewText` | string | 12 张牌的概览文本，格式：`一月抽到了正位的XX牌。二月抽到了逆位的XX牌。...` |
| `monthNumber` | number | 月份数字，1-12 |
| `currentCardDetail` | string | 当前月份对应牌的详细牌意（包含牌名和牌意文本） |
| `nickName` | string | 用户昵称 |
| `careerStatus` | string | 身份类型代码：`middle_high_school` / `college_above` / `worker` / `freelance` |
| `gender` | string | 性别代码：`female` / `male` / `other` |
| `loveStatus` | string | 感情状态代码：`single` / `in_relationship` / `ambiguous` |
| `careerStatusLabel` | string | 身份类型显示文本：`初高中生` / `大学及以上` / `职场人` / `自由职业` |
| `genderLabel` | string | 性别文本：`女` / `男` / `不方便告诉` |
| `loveStatusLabel` | string | 感情状态显示文本：`单身` / `有对象` / `暧昧中` |
| `timeInfo` | string | 当前时间信息，格式：`X月X日X午X点` |

### 出参（JSON）

```json
{
  "keyword": "一句话点明这个月主题，要有希望感，10个字",
  "content": "解读内容，200字左右，2~3个段落" 
}
```

### Prompt 模板

```
你是我的塔罗师，我已经抽取了12张牌分别代表我的2026年12个月运势。

## 抽到的牌如下：

${overviewText}

## 该月份对应牌的详细牌意如下：

${currentCardDetail}

## 我已经生成了前${monthNumber-1}个月的运势，
## 现在你帮我输出第${monthNumber}月（${monthName}）的运势。
- 请你注意这个月在一年中给人的感觉，这个月份常常出现的情况。结合这些对用户给出好的解读。
- 根据这个月的情况和抽到的牌来写开头的句子。
- 因为用户是在${timeInfo}的时候，抽2026年的牌，所以你要结合现在的时间和所抽取的预测2026年的${monthName}的运势做出判断。注意时态要用将来时。

## 语气风格
1. 不要使用比喻句。
2. 语气要有希望感。
3. 如果抽到坏牌，可以对用户做出共情猜测。
4. 请你深入但口语化地解读。用"你/我"第一人称对话，口语化，简短句。
5. 多停顿词（比如"我觉得"、语气词"嗯"、"欸"等），停顿词会让你的解读更自然，像是真人在斟酌和思考。但开头不要用停顿词。

输出格式为Json格式：
{
  "keyword": "一句话点明这个月主题，要有希望感，10个字",
  "content": "解读内容，200字左右，2~3个段落"
}

### 我的背景资料如下，如果可以衔接牌意可自然地穿插使用：
- 性别：${genderDisplay}
- 感情状态：目前是 ${loveDisplay}
${singleStatusChangeNote}${ambiguousStatusChangeNote}${inRelationshipStatusChangeNote}
- 身份类型：${careerDisplay}
身份类型只是用来辅助判断，你主要结合牌意进行解读。不要总是提身份。
${singleGuidance}${ambiguousGuidance}${inRelationshipGuidance}
## 现在的时间如下，解读时注意时态：
${timeInfo || '（未提供）'}
```

---

## 步骤 2：年度运势总览

### Prompt 函数

`getAnnualFortuneSummaryPrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `monthlyContents` | string[] | 12 个月的运势内容数组（按月份顺序，每个元素是步骤1返回的 `content` 字段） |
| `nickName` | string | 用户昵称 |
| `careerStatus` | string | 身份类型代码 |
| `gender` | string | 性别代码 |
| `loveStatus` | string | 感情状态代码 |
| `careerStatusLabel` | string | 身份类型显示文本 |
| `genderLabel` | string | 性别显示文本 |
| `loveStatusLabel` | string | 感情状态显示文本 |

### 出参（JSON）

```json
{
  "analysis": "分析整体运势走向，以及各个月的运势大概是多少分。",
  "hookStarting": "放在年运的开头段落，引人入胜的一小段口语化内容，引出下面12个月运势。",
  "summary": "对全年运势和关键变化的预测的总结。口吻口语化而有亲和力，多用\"你\"、\"我看到\"。注意时态是将来时。在summary结尾可以引出后面还有六个细分领域的运势，引导用户抽牌。",
  "January": 85,
  "February": 78,
  "March": 82,
  "April": 75,
  "May": 88,
  "June": 80,
  "July": 83,
  "August": 79,
  "September": 86,
  "October": 81,
  "November": 84,
  "December": 87
}
```

### Prompt 模板

```
请你根据我的12个月抽到的牌和运势，告诉我，我每个月的运势指数大概是多少？（0~100评分）

${monthlyFortunes}
## 如何写hookStarting
- 要传递希望感，邀请用户进入新的一年的感觉。
- 第一句可以隐喻用户的整组牌的重点，可以指出模式。比如"...的事情会如你所愿"。
- 第二句可以指出方向的转变、转折点。
- 第三局可以邀请用户看每个月细节运势。
- 不要使用比喻句，太土了。
- 要稍微设置悬念。

## 如何写 summary
- 注意时态，现在是在抽取将要发生的年运的运势，所以是将来时。

用户基本资料如下：
- 昵称：${nickName || '（未提供）'}
- 身份类型：${careerDisplay}
- 性别：${genderDisplay}
- 感情状态：${loveDisplay}

输出格式，用 Json 格式输出：

{
  "analysis": "分析整体运势走向，以及各个月的运势大概是多少分。",
  "hookStarting": "放在年运的开头段落，引人入胜的一小段口语化内容，引出下面12个月运势。",
  "summary": "对全年运势和关键变化的预测的总结。口吻口语化而有亲和力，多用\"你\"、\"我看到\"。注意时态是将来时。在summary结尾可以引出后面还有六个细分领域的运势，引导用户抽牌。",
  "January": "一月运势得分（int 格式，0~100）",
  "February": "二月运势得分（int 格式，0~100）",
  "March": "三月运势得分（int 格式，0~100）",
  "April": "四月运势得分（int 格式，0~100）",
  "May": "五月运势得分（int 格式，0~100）",
  "June": "六月运势得分（int 格式，0~100）",
  "July": "七月运势得分（int 格式，0~100）",
  "August": "八月运势得分（int 格式，0~100）",
  "September": "九月运势得分（int 格式，0~100）",
  "October": "十月运势得分（int 格式，0~100）",
  "November": "十一月运势得分（int 格式，0~100）",
  "December": "十二月运势得分（int 格式，0~100）"
}
```

---

## 步骤 3：六大领域解读（6个领域并发）

### Prompt 函数

`getAnnualFortuneAreaPrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `area` | string | 领域名称，如 `感情`、`事业·学业`、`财富与金钱`、`健康与身心状态`、`人际关系与社交氛围`、`内在成长与心理能量` |
| `cardContent` | string | 该领域对应塔罗牌的牌意文本（包含牌名和牌意） |
| `nickName` | string | 用户昵称 |
| `careerStatus` | string | 身份类型代码 |
| `gender` | string | 性别代码 |
| `loveStatus` | string | 感情状态代码 |
| `careerStatusLabel` | string | 身份类型显示文本 |
| `genderLabel` | string | 性别显示文本 |
| `loveStatusLabel` | string | 感情状态显示文本 |

### 出参（JSON）

```json
{
  "hookSentence": "一句话，≤30 字，强调该领域的主命题，用口语化，强代入感的口吻，省略人称和主语",
  "content": "解读结果，总字数不超过300字，可以分成2~3段",
  "summaryHighlight": "用来回答这一年在这个领域最值得记住的一句话，给可实操更具体的内容。30个字以内。"
}
```

### Prompt 模板

```
你需要帮我进行塔罗占卜。帮我输出年度运势的内容，之前你已经输出完12个月的运势了，现在我希望你输出的是单个领域「${area}」的内容。

我抽到的塔罗牌是：

${cardContent}

## 注意
- 可以先解释这张牌核心是什么，在${cardContent}这个位置抽到这张牌意味着什么。不要使用比喻。
- 对${area}做出细致的分析说明。

## 语气风格
1. 如果抽到坏牌，可以对用户做出共情猜测。
2. 请你深入但口语化地解读。用"你/我"第一人称对话，口语化，简短句。
3. 多停顿词（比如某种语气词、"我觉得"等）。但开头句里不要用停顿词。
4. 使用感性材料，如生活里的细节、感性素材是能唤起画面感、听觉感和情绪的材料。与抽象的概念相对，它通过具体、感性的内容影响听者。使用感性材料来展开抽象概念，让人不需要思考就能明白含义。
5. 不要描绘牌面内容。

## 如何写 hookSentence
1. 口语化，同时深入而直击核心。
2. 充满哲理。
3. 省略人称和主语。
4. 不要用比喻句。

输出格式：用 Json 格式输出
{
  "hookSentence": "一句话，≤30 字，强调该领域的主命题，用口语化，强代入感的口吻，省略人称和主语",
  "content": "解读结果，总字数不超过300字，可以分成2~3段",
  "summaryHighlight": "用来回答这一年在这个领域最值得记住的一句话，给可实操更具体的内容。30个字以内。"
}
  
### 我的背景资料如下：
- 身份类型：${careerDisplay}
- 性别：${genderDisplay}
- 感情状态：${loveDisplay}

## 「事业·学业」需要根据身份类型自动调整重点：
学生：偏向课程、考试、升学、未来规划
非学生：偏向工作项目、职业选择、身份切换

## 财富需要根据身份类型自动调整重点：
学生：支出时偏向花钱，而不是投资
```

---

## 步骤 4：六大领域雷达图评分

### Prompt 函数

`getAnnualFortuneAreaRadarPrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `areaInfoText` | string | 六大领域的解读文本，格式：`【感情】\n一句话主命题：...\n解读内容：...\n关键提醒：...\n\n【事业·学业】\n...`（每个领域包含 hookSentence、content、summaryHighlight） |

### 出参（JSON）

```json
{
  "analysis": "分析各个领域运势是大概多少分。",
  "love": 85,
  "career": 78,
  "wealth": 82,
  "health": 75,
  "social": 88,
  "innerGrowth": 80,
  "startingOverview": "六大领域的整体总览，100字左右。总结性发言，放在六大领域的开头。"
}
```

### Prompt 模板

```
请你根据我的六大领域抽到的牌和运势，告诉我，我每个领域的运势指数大概是多少？（0~100评分）

## 六大领域的运势解读如下
${areaInfoText}

## 然后请你：
- 请你根据我的六大领域运势，给我一个适合它们的开头段落。放在 startingOverview 里。
- 第一句可以隐喻用户的整组牌的重点，可以指出六大领域共通模式。
- 这个段落需要对六大领域做出一定的点评。
- 不要使用比喻句。平铺直叙即可。
- 可以适当结合输出的各领域得分，去猜测用户希望看到什么样的开头。
- 在 startingOverview 结尾，可以引出接下来会说的六大领域的详细内容。
- 口吻口语化，保持轻松，多用"你"、"我看到"。
- 100字左右。

输出格式，用 Json 格式输出：

{
  "analysis": "分析各个领域运势是大概多少分。",
  "love": "爱情运势得分（int，0~100）",
  "career": "事业与学业运势得分（int，0~100）",
  "wealth": "财富与金钱运势得分（int，0~100）",
  "health": "健康与身心状态得分（int，0~100）",
  "social": "人际关系与社交氛围得分（int，0~100）",
  "innerGrowth": "内在成长与心理能量得分（int，0~100）"
  "startingOverview": "六大领域的整体总览，100字左右。总结性发言，放在六大领域的开头。"
}
```

---

## 步骤 5：年度总结语

### Prompt 函数

`getAnnualFortuneClosingPrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `decemberContent` | string | 十二月运势的 content 字段（来自步骤1） |
| `areaInfoText` | string | 六大领域的解读文本（同步骤4，格式：`【感情】\n一句话主命题：...\n解读内容：...\n关键提醒：...\n\n...`） |

### 出参（JSON）

```json
{
  "anchorSentence": "≤30 字，整年的情绪收束句子，可以使用**加粗**包裹整句话（不需要再出现 explain 等前缀）",
  "closingParagraph": "120-180 字的结尾总结段落，口吻口语化、有亲和力，多用\"你\"\"我看到\""
}
```

### Prompt 模板

```
请你根据我之前的年度运势，给我一个总结语。这个总结语是预测明年运势的。

我之前输出的十二个月运势如下（纯文本）：

${decemberContent}

我在六个领域的年度解读如下（纯文本）：

${areaInfoText}

## 总结语包括：
- 结尾收束
- 年末 anchor 一句话：≤30 字，可加粗，用作整份报告的情绪收束
  * 结尾总结段落：约 120–180 字，包含：
    * 这一年最重要的1个或者2个主线主题，用"/"分隔
    * 如果顺着这条发展线往下走，年末的自己大致处在什么状态

## 注意
- 请你注意时态，现在是在26年还没开始时进行下一年的运势的预测。
- 语气要有希望感。

请你使用 Json 格式输出，字段为：
{
  "anchorSentence": "≤30 字，整年的情绪收束句子，可以使用**加粗**包裹整句话（不需要再出现 explain 等前缀）",
  "closingParagraph": "120-180 字的结尾总结段落，口吻口语化、有亲和力，多用\"你\"\"我看到\""
}

注意：你只需要输出上述 Json 对象本身，不需要额外说明文字。
```

---

## 步骤 6：玄学指引好物

### Prompt 函数

`getAnnualFortuneGoodLuckItemsPrompt`

### 入参变量

| 变量名 | 类型 | 说明 |
| --- | --- | --- |
| `decemberContent` | string | 十二月运势的 content 字段（来自步骤1） |
| `areaInfoText` | string | 六大领域的解读文本（同步骤4，格式：`【感情】\n一句话主命题：...\n解读内容：...\n关键提醒：...\n\n...`） |

### 出参（JSON）

```json
{
  "analysis": "为什么需要这个玄学指引好物",
  "goodLuckItem": "玄学好物的名字"
}
```

### Prompt 模板

```
请你根据我之前的运势，帮我选择玄学指引好物。

我之前输出的十二月运势如下（纯文本）：

${decemberContent}

我在六个领域的年度解读如下（纯文本）：

${areaInfoText}

请从以下 **仅限的11个幸运物列表** 中，挑选 **唯一最匹配** 的一个推荐给用户：

1. 白水晶（关键词：综合平衡、净化、专注）
2. 粉水晶（关键词：桃花、人缘、治愈）
3. 黑曜石（关键词：防小人、健康、辟邪）
4. 黄水晶（关键词：搞钱、事业、自信）
5. 香薰蜡烛（关键词：动力、愿望显化、温暖）
6. 扩香石（关键词：焦虑、失眠、潜意识）
7. 鼠尾草（关键词：倒霉、净化环境、重启）
8. 干花香囊（关键词：贵人、出行、气质）
9. 捕梦网（关键词：噩梦、迷茫、守护）
10. 多肉植物（关键词：扎根、耐心、稳重）
11. 幸运御守（关键词：特定加持、信念、考试/交通）

## 输出格式

{
  "analysis": "为什么需要这个玄学指引好物",
  "goodLuckItem": "玄学好物的名字"
}

example:
{
  "analysis": "为什么需要这个玄学指引好物",
  "goodLuckItem": "萤石"
}

注意：你只需要输出上述 Json 对象本身，不需要额外说明文字。
```

